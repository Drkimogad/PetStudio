<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PetStudio</title>
	<meta name="description" content="At PetStudio, we turn your pet‚Äôs precious moments into a visual masterpiece! üé®üêæ">
	<meta property="og:title" content="PetStudio - Pet Profile Manager">
	<meta property="og:description" content="Create and share your pet's profile with milestones and birthday reminders">
	<meta property="og:type" content="website">

<!-- Enhanced CSP for Self-Hosted Font Awesome -->
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
    https://www.gstatic.com
    https://cdn.jsdelivr.net
    https://cdnjs.cloudflare.com
    https://apis.google.com
    https://accounts.google.com
    https://www.googleapis.com
    https://unpkg.com;
  style-src 'self' 'unsafe-inline'
    https://fonts.googleapis.com
    https://accounts.google.com;
  style-src-elem 'self' 'unsafe-inline'
    https://fonts.googleapis.com
    https://accounts.google.com;
  connect-src 'self'
    https://www.googleapis.com
    https://firestore.googleapis.com
    https://*.googleapis.com
    https://identitytoolkit.googleapis.com
    https://accounts.google.com
    https://api.cloudinary.com;
  frame-src https://accounts.google.com;
  font-src 'self' data: https://fonts.gstatic.com;
  img-src 'self' blob: data: 
    https://*.googleusercontent.com 
    https://res.cloudinary.com;
  object-src 'none';
  base-uri 'self';
  form-action 'self';
  worker-src 'self';
">

	<!-- Preload critical resources -->
	<link rel="preconnect" href="https://accounts.google.com">
	<link rel="preconnect" href="https://apis.google.com">
	<link rel="preload" href="https://accounts.google.com/gsi/client" as="script">

	<script>
		window.handleScriptError = (error) => {
			console.error('Script failed to load:', error);
			document.getElementById('authContainer').innerHTML = `
      <div class="error-message">
        <h2>Application Error</h2>
        <p>Failed to load required resources. Please refresh or try again later.</p>
      </div>
    `;
		};

	</script>

	<!-- Google Sign-In has been removed -->
	<script src="https://accounts.google.com/gsi/client" async defer></script>
	<script>
		window.onload = function() {
			google.accounts.id.initialize({
				client_id: "480425185692-i5d0f4gi96t2ap41frgfr2dlpjpvp278.apps.googleusercontent.com",
				callback: handleCredentialResponse,
			});

			google.accounts.id.renderButton(
				document.getElementById("googleSignInButton"), // Make sure this exists in your HTML
				{
					theme: "filled_blue",
					size: "large"
				}
			);
		};

		function handleCredentialResponse(response) {
			console.log("Google ID Token", response.credential);
			// You can pass this to Firebase auth if using signInWithCredential
		}

	</script>

	<!-- Firebase Scripts -->
	<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>

	<script src="https://unpkg.com/cloudinary-core@2.11.4/cloudinary-core-shrinkwrap.min.js"></script>

	<!-- html2canvas -->
	<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" integrity="sha256-6H5VB5QyLldKH9oMFUmjxw2uWpPZETQXpCkBaDjquMs=" crossorigin="anonymous">
	</script>

	<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
	<!-- Add this in your <head> to use Font Awesome icons -->

	<!-- Metadata -->
	<meta property="og:url" content="https://your-petstudio-url.com">
	<meta name="twitter:card" content="summary_large_image">

	<!-- Local Resources -->
	<link rel="icon" href="/PetStudio/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="./styles.css">
	<!-- Self-hosted Font Awesome 7 -->
        <link rel="stylesheet" href="/PetStudio/static/css/all.min.css">
	<link rel="manifest" href="./manifest.json">
	<style>
		/* Additional auth-specific styles */
		.auth-switch-btn {
			background: none;
			border: none;
			color: #0066cc;
			text-decoration: underline;
			cursor: pointer;
			padding: 10px 0;
			font-size: 1rem;
			margin-top: 15px;
			display: block;
			width: 100%;
			text-align: center;
		}

		.auth-switch-btn:hover {
			color: #004499;
		}

		.button[disabled] {
			opacity: 0.7;
			cursor: not-allowed;
		}

		.auth-message {
			text-align: center;
			margin: 15px 0;
			color: #666;
		}

		.success-message {
			color: #28a745;
			text-align: center;
			margin: 15px 0;
		}

	</style>
</head>

<body>
	<div id="processing-loader" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:2000;">
		<div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:white; text-align:center;">
			<p>Loading your app...</p>
			<div class="spinner"></div>
		</div>
	</div>
	<!-- Auth Container -->
	<div id="authContainer">
		<div class="auth-header">
			<h1>PetStudio</h1>
			<h2>Why Just Take Photos When You Can Create Magic?</h2>
		</div>
		<div id="googleSignInWrapper">
			<div id="googleSignInBtn"></div>
			<p class="auth-message">Sign in with your Google account to continue</p>
		</div>
		<div id="fullPageBanner" class="banner banner-wrapper">
			<img src="./banner/image.png" alt="Banner Image" class="banner-image">
			<div class="quote">‚ÄúTrack your pet‚Äôs journey every step of the way.‚Äù</div>
		</div>
	</div>

	<!-- Dashboard -->
	<div id="dashboard" class="hidden">
		<h1>Welcome to your pet's dashboard</h1>
		<button id="addPetProfileBtn" class="button">Add Pet Profile</button>

		<div id="petList" class="pet-list hidden"></div>
		<button id="logoutBtn" class="button">Logout</button>


		<div id="profileSection" class="hidden">
			<h2>Create a Pet Profile</h2>
			<form id="profileForm" autocomplete="on">
				<!-- Pet old form -->

				<label for="petName">Pet Name:</label>
				<input type="text" id="petName" name="petName" required>

				<label for="petGallery">Upload Photos:</label>
				<input type="file" id="petGallery" name="petGallery" multiple accept="image/*">

                                  <label for="petBreed">Breed:</label>
				<input type="text" id="petBreed" name="petBreed" required>

				<label for="petDob">Date of Birth:</label>
				<input type="date" id="petDob" name="petDob" required>

				<label for="petUpcomingBirthday">Upcoming Birthday:</label>
				<input type="date" id="petUpcomingBirthday" name="petUpcomingBirthday">

				<label for="moodHistoryInput">Mood at Creation:</label>
				<select id="moodHistoryInput" name="moodHistoryInput">
					<option value="">Select Mood</option>
					<option value="happy">üòä Happy</option>
					<option value="depressed">üòî Depressed</option>
					<option value="sad">üòû Sad</option>
					<option value="angry">üò† Angry</option>
					<option value="sick">ü§í Sick</option>
				</select>

				        




				
				
				<!-- Pet Tags Section with Icons -->
					  <div class="pet-tags-container">
  <label>Tags:</label>
  <div class="pet-tags-options">
    <label class="tag-option">
      <input type="checkbox" name="petTags" value="Adventure" hidden>
      <span class="tag">
        <i class="fas fa-hiking"></i> Adventure
      </span>
    </label>
    <label class="tag-option">
      <input type="checkbox" name="petTags" value="Cuddly" hidden>
      <span class="tag">
        <i class="fas fa-heart"></i> Cuddly
      </span>
    </label>
    <label class="tag-option">
      <input type="checkbox" name="petTags" value="Playful" hidden>
      <span class="tag">
        <i class="fas fa-table-tennis"></i> Playful
      </span>
    </label>
    <label class="tag-option">
      <input type="checkbox" name="petTags" value="Foodie" hidden>
      <span class="tag">
        <i class="fas fa-utensils"></i> Foodie
      </span>
    </label>
    <label class="tag-option">
      <input type="checkbox" name="petTags" value="Athletic" hidden>
      <span class="tag">
        <i class="fas fa-running"></i> Athletic
      </span>
    </label>
  </div>
  <small>Click to select multiple tags</small>
</div>



				

				<!-- Emergency Contact Section -->
				<div class="emergency-contact-section">
					<h3>Emergency Contact</h3>

					<label for="emergencyName">Full Name:</label>
					<input type="text" id="emergencyName" name="emergencyName">

					<label for="emergencyPhone">Contact Number:</label>
					<input type="tel" id="emergencyPhone" name="emergencyPhone">

					<label for="emergencyRelationship">Relationship to Pet:</label>
					<input type="text" id="emergencyRelationship" name="emergencyRelationship">

					<label for="microchipNumber">Microchip Number:</label>
					<input type="text" id="microchipNumber" name="microchipNumber">
				</div>

				


				<label for="petNotes">Notes & Memories:</label>
				<textarea id="petNotes" name="petNotes" rows="3" placeholder="Gift ideas, funny habits, favorite toys..."></textarea>
				
				<!-- üî• Add Nickname Field HERE -->
				<label for="petNicknames">Nicknames (Optional):</label>
				<input type="text" id="petNicknames" name="petNicknames" placeholder="e.g., 'Fluffy', 'Sir Barksalot'">

				<div class="birthday-reminder-section">
                                 <label for="petUpcomingBirthday">Upcoming Birthday:</label>
                                 <input type="date" id="petUpcomingBirthday" name="petUpcomingBirthday" onchange="toggleCelebrateButton(this)">
                                </div>


<div class="theme-selection">
  <h4>Card Theme</h4>
  <div class="theme-options">
    <label class="theme-option">
      <input type="radio" name="theme" value="balloons" checked onchange="previewTheme(this.value)">
      <div class="theme-preview balloons-mini">
      <span class="theme-icon">üéà</span>
      </div>
      <span>Balloons</span>
    </label>

    <label class="theme-option">
      <input type="radio" name="theme" value="paws" onchange="previewTheme(this.value)">
      <div class="theme-preview paws-mini">
      <span class="theme-icon">üêæ</span>
      </div>
      <span>Paw Prints</span>
    </label>

    <label class="theme-option">
      <input type="radio" name="theme" value="minimal" onchange="previewTheme(this.value)">
      <div class="theme-preview minimal-mini">
	<span class="theme-icon">M</span>
	</div>
      <span>Minimal</span>
    </label>

    <label class="theme-option">
      <input type="radio" name="theme" value="party" onchange="previewTheme(this.value)">
      <div class="theme-preview party-mini">
     <span class="theme-icon">üéä</span>
    </div>
      <span>Party</span>
    </label>

    <label class="theme-option">
      <input type="radio" name="theme" value="elegant" onchange="previewTheme(this.value)">
      <div class="theme-preview elegant-mini">
      <span class="theme-icon">E</span>
     </div>
      <span>Elegant</span>
    </label>
  </div>
</div>

				<div id="collage-modal" class="modal hidden">
					<div class="modal-content">
						<h3>Create Collage</h3>
						<div class="image-grid" id="collage-image-grid"></div>
						<div class="layout-options">
							<button data-layout="2x2">2√ó2</button>
							<button data-layout="3x3">3√ó3</button>
							<button data-layout="1x3">1√ó3</button>
						</div>
					</div>
				</div>

				<button type="submit" class="button">Save Profile</button>
			</form>
		</div>
	</div>
	<!-- QR Modal -->
	<div id="qr-modal">
		<div class="printable-area">
			<div id="qrcode-container"></div>
			<div id="qr-controls" style="margin-top:20px;">
				<button class="qr-print" data-action="print">Print</button>
				<button class="qr-download" data-action="download">Download</button>
				<button class="qr-share" data-action="share" style="background:#9b59b6; color:white;">Share</button>
				<button class="qr-close" data-action="close" style="background:#e74c3c; color:white;">Close</button>
			</div>
			<p id="qr-status" style="font-size:12px; color:#666; margin-top:10px;"></p>
		</div>
	</div>

	<footer>
		<p>&copy; 2025 PetStudio. All rights reserved.</p>
	</footer>

	<!-- Scripts (Optimized Order) -->
	<script src="./js/auth.js" defer></script>
	<script src="./js/utils.js" defer></script>
	<script src="./js/dashboard.js" defer></script>
</body>

</html>
