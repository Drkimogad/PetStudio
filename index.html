<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PetStudio</title>
  <meta name="description" content="At PetStudio, we turn your pet‚Äôs precious moments into a visual masterpiece! üé®üêæ">
  <meta property="og:title" content="KGad - PetStudio developper">
  <meta property="og:description" content="For subscription contact us on "dr_kimogad@yahoo.com"">
  <meta property="og:type" content="website">
	
<!-- Enhanced CSP for Self-Hosted Font Awesome -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' 'unsafe-eval'
    https://www.gstatic.com
    https://cdn.jsdelivr.net
    https://cdnjs.cloudflare.com
    https://apis.google.com
    https://accounts.google.com
    https://www.googleapis.com
    https://unpkg.com;
    style-src 'self' 'unsafe-inline'
    https://fonts.googleapis.com
    https://accounts.google.com;
    style-src-elem 'self' 'unsafe-inline'
    https://fonts.googleapis.com
    https://accounts.google.com;
    connect-src 'self'
    https://www.googleapis.com
    https://firestore.googleapis.com
    https://*.googleapis.com
    https://identitytoolkit.googleapis.com
    https://accounts.google.com
    https://api.cloudinary.com
    https://petstudio.dr-kimogad.workers.dev
    https://*.petstudio.dr-kimogad.workers.dev;
    frame-src https://accounts.google.com;
    font-src 'self' data: https://fonts.gstatic.com;
    img-src 'self' blob: data: 
    https://*.googleusercontent.com 
    https://res.cloudinary.com
	https://petstudio.dr-kimogad.workers.dev
    https://*.petstudio.dr-kimogad.workers.dev;
    object-src 'none';
    base-uri 'self';
    form-action 'self';
    worker-src 'self';
    ">

  <!-- Preload critical resources -->
  <link rel="preconnect" href="https://accounts.google.com">
  <link rel="preconnect" href="https://apis.google.com">
  <link rel="preload" href="https://accounts.google.com/gsi/client" as="script">
  <script>
    window.handleScriptError = (error) => {
    	console.error('Script failed to load:', error);
    	document.getElementById('authContainer').innerHTML = `
        <div class="error-message">
          <h2>Application Error</h2>
          <p>Failed to load required resources. Please refresh or try again later.</p>
        </div>
      `;
    };
    
  </script>
  <!-- Google Sign-In has been removed -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script>
    window.onload = function() {
    	google.accounts.id.initialize({
    		client_id: "480425185692-i5d0f4gi96t2ap41frgfr2dlpjpvp278.apps.googleusercontent.com",
    		callback: handleCredentialResponse,
    	});
    
    	google.accounts.id.renderButton(
    		document.getElementById("googleSignInButton"), // Make sure this exists in your HTML
    		{
    			theme: "filled_blue",
    			size: "large"
    		}
    	);
    };
    
    function handleCredentialResponse(response) {
    	console.log("Google ID Token", response.credential);
    	// You can pass this to Firebase auth if using signInWithCredential
    }
    
  </script>
  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
  <script src="https://unpkg.com/cloudinary-core@2.11.4/cloudinary-core-shrinkwrap.min.js"></script>

  <!-- Add this BEFORE your other scripts -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
	
  <!-- html2canvas -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" integrity="sha256-6H5VB5QyLldKH9oMFUmjxw2uWpPZETQXpCkBaDjquMs=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
  <!-- Add this in your <head> to use Font Awesome icons -->
  <!-- Metadata -->
  <meta property="og:url" content="https://your-petstudio-url.com">
  <meta name="twitter:card" content="summary_large_image">
  <!-- Local Resources -->
  <link rel="icon" href="/PetStudio/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="./styles.css">
  <!-- Self-hosted Font Awesome 7 -->
  <link rel="stylesheet" href="/PetStudio/static/css/all.min.css">
  <link rel="manifest" href="./manifest.json">
  <style>
    /* Additional auth-specific styles */
    .auth-switch-btn {
    background: none;
    border: none;
    color: #0066cc;
    text-decoration: underline;
    cursor: pointer;
    padding: 10px 0;
    font-size: 1rem;
    margin-top: 15px;
    display: block;
    width: 100%;
    text-align: center;
    }
    .auth-switch-btn:hover {
    color: #004499;
    }
    .button[disabled] {
    opacity: 0.7;
    cursor: not-allowed;
    }
    .auth-message {
    text-align: center;
    margin: 15px 0;
    color: #666;
    }
    .success-message {
    color: #28a745;
    text-align: center;
    margin: 15px 0;
    }
  </style>
</head>
<body>

       <!-- Replace your current loader with this: -->
<div id="processing-loader" class="global-loader" style="display:none;">
  <div class="loader-overlay"></div>
  <div class="loader-content">
    <!-- Lottie Animation -->
    <lottie-player
      id="loader-animation"
      src="./lottie/petsplash.json"
      background="transparent"
      speed="1"
      loop
      autoplay
      style="width: 120px; height: 120px;">
    </lottie-player>
    
    <!-- CSS Fallback Spinner -->
    <div id="css-spinner-fallback" class="css-spinner" style="display:none;"></div>
    
    <!-- Messages -->
    <p id="loader-message-saving" class="loader-text" style="display:none;">Saving profile...</p>
    <p id="loader-message-updating" class="loader-text" style="display:none;">Updating profile...</p>
    <p id="loader-message-success" class="loader-text" style="display:none;">Success!</p>
  </div>
</div>
	
  <!-- Auth Container -->
  <div id="authContainer">
    <div class="auth-header">
      <h1>PetStudio</h1>
      <h2>Why Just Take Photos When You Can Create Magic?</h2>
    </div>
	  
 <div id="googleSignInWrapper">
      <div id="googleSignInBtn"></div>
      <p class="auth-message">Sign in with your Google account to continue</p>
      <div class="legal-links">
       <a href="terms.html" class="legal-link">Terms of Service</a>
       <span class="link-separator">‚Ä¢</span>
       <a href="privacy.html" class="legal-link">Privacy Policy</a>
     </div>
  </div>
	  
    <div id="fullPageBanner" class="banner banner-wrapper">
      <img src="https://drkimogad.github.io/PetStudio/banner/image.png" alt="Banner Image" class="banner-image">
      <div class="quote">‚ÄúTrack your pet‚Äôs journey every step of the way.‚Äù</div>
    </div>
  </div>
  <!-- Dashboard -->
  <div id="dashboard" class="hidden">
    <h1>Welcome to your pet's dashboard</h1>
	    <!-- Add this button container -->
   <div class="dashboard-actions">
      <button id="addPetProfileBtn" class="button">Add Pet Profile</button>
      <button id="logoutBtn" class="button">Logout</button>
    </div>
	  
    <div id="petList" class="pet-list hidden"></div>
	  
    <div id="profileSection" class="hidden">
      <h2>Create a Pet Profile</h2>
	    
     <form id="profileForm" autocomplete="on">
   <!-- EVERYTHING IS NESTED UNDER PROFILEFORM -->
  <!-- BASIC INFO SECTION -->
  <div class="petBasicInfo">
    <label for="petName">Pet Name:</label>
    <input type="text" id="petName" name="petName" required>
   <!-- üî• Add Nickname Field HERE -->
    <label for="petNicknames">Nicknames (Optional):</label>
    <input type="text" id="petNicknames" name="petNicknames" placeholder="e.g., 'Fluffy', 'Sir Barksalot'">
        
    <label for="petBreed">Breed:</label>
    <input type="text" id="petBreed" name="petBreed" required>
    
    <label for="petDob">Date of Birth:</label>
    <input type="date" id="petDob" name="petDob" required>
    <!-- üî• Right after the DOB input  -->  
    <p class="age-preview" id="agePreview">
    <strong>Realtime Age:</strong> Will be calculated
   </p> 
    <label for="nextBirthday">Upcoming Birthday:</label>
    <input type="date" id="nextBirthday" name="nextBirthday">
  </div>
		 
  <div class="birthday-reminder-section">
  <label for="birthdayReminder">Birthday Reminder:</label>
  <div class="input-with-icon">
    <i class="fas fa-calendar-alt"></i>
    <input type="text" id="birthdayReminder" name="birthdayReminder" 
           placeholder="Actual birthdate or a few days before (YYYY/MM/DD)" 
           onchange="toggleCelebrateButton(this)">
  </div>

		   <!-- MOOD SECTION -->
  <div class="moodHistoryInput">
    <label for="moodHistoryInput">Mood at Creation:</label>
    <select id="moodHistoryInput" name="moodHistoryInput">
      <option value="">Select Mood</option>
      <option value="happy">üòä Happy</option>
      <option value="depressed">üòî Depressed</option>
      <option value="sad">üòû Sad</option>
      <option value="angry">üò† Angry</option>
      <option value="sick">ü§í Sick</option>
    </select>
  </div>
                 <!-- Emergency Contact Section -->
        <div class="emergency-contact-section">
          <h3>Emergency Contact</h3>
          <label for="emergencyName">Full Name:</label>
          <input type="text" id="emergencyName" name="emergencyName">
          <label for="emergencyPhone">Contact Number:</label>
          <input type="tel" id="emergencyPhone" name="emergencyPhone">
          <label for="emergencyRelationship">Relationship to Pet:</label>
          <input type="text" id="emergencyRelationship" name="emergencyRelationship">
          <label for="microchipNumber">Microchip Number:</label>
          <input type="text" id="microchipNumber" name="microchipNumber">
        </div>
		 
    <!-- Pet Tags Section with Icons -->
        <div class="pet-tags-container">
          <label>Tags:</label>
          <div class="pet-tags-options">
            <label class="tag-option">
            <input type="checkbox" name="petTags" value="Adventure" hidden>
            <span class="tag">
            <i class="fas fa-hiking"></i> Adventure
            </span>
            </label>
            <label class="tag-option">
            <input type="checkbox" name="petTags" value="Cuddly" hidden>
            <span class="tag">
            <i class="fas fa-heart"></i> Cuddly
            </span>
            </label>
            <label class="tag-option">
            <input type="checkbox" name="petTags" value="Playful" hidden>
            <span class="tag">
            <i class="fas fa-table-tennis"></i> Playful
            </span>
            </label>
            <label class="tag-option">
            <input type="checkbox" name="petTags" value="Foodie" hidden>
            <span class="tag">
            <i class="fas fa-utensils"></i> Foodie
            </span>
            </label>
            <label class="tag-option">
            <input type="checkbox" name="petTags" value="Athletic" hidden>
            <span class="tag">
            <i class="fas fa-running"></i> Athletic
            </span>
            </label>
          </div>
          <small>Click to select multiple tags</small>
        </div>
		 
	 <!-- NEW: Dedicated gallery section -->
  <div class="petGallerySection">
    <label for="petGallery">Upload Photos:</label>
    <input type="file" id="petGallery" name="petGallery" multiple accept="image/*">
    <div id="galleryPreview" class="gallery-preview"></div>
  </div>


        <div class="pet-notes">    
        <label for="petNotes">Notes & Memories:</label>
        <textarea id="petNotes" name="petNotes" rows="3" placeholder="Gift ideas, funny habits, favorite toys..."></textarea>
       </div>

	      
<div class="theme-selection">
  <h4>Card Theme</h4>
  <div class="theme-options">
    <!-- Balloons Theme -->
    <label class="theme-option">
      <input type="radio" name="theme" value="balloons" checked onchange="previewTheme(this.value)">
      <div class="theme-preview balloons-mini" data-theme="balloons" style="background-color: #ffebee; border-color: #f44336">
        <span class="theme-icon">üéà</span>
      </div>
      <span>Balloons</span>
    </label>
    
    <!-- Paws Theme -->
    <label class="theme-option">
      <input type="radio" name="theme" value="paws" onchange="previewTheme(this.value)">
      <div class="theme-preview paws-mini" data-theme="paws" style="background-color: #e8f5e9; border-color: #4caf50">
        <span class="theme-icon">üêæ</span>
      </div>
      <span>Paw Prints</span>
    </label>
    
    <!-- Minimal Theme -->
    <label class="theme-option">
      <input type="radio" name="theme" value="minimal" onchange="previewTheme(this.value)">
      <div class="theme-preview minimal-mini" data-theme="minimal" style="background-color: #ffffff; border-color: #bdbdbd">
        <span class="theme-icon">üéÇ</span> <!-- Changed from 'M' to cake emoji -->
      </div>
      <span>Minimal</span>
    </label>
    
    <!-- Party Theme -->
    <label class="theme-option">
      <input type="radio" name="theme" value="party" onchange="previewTheme(this.value)">
      <div class="theme-preview party-mini" data-theme="party" style="background-color: #fff3e0; border-color: #ff9800">
        <span class="theme-icon">üéä</span>
      </div>
      <span>Party</span>
    </label>
    
    <!-- Elegant Theme -->
    <label class="theme-option">
      <input type="radio" name="theme" value="elegant" onchange="previewTheme(this.value)">
      <div class="theme-preview elegant-mini" data-theme="elegant" style="background-color: #f3e5f5; border-color: #9c27b0">
        <span class="theme-icon">‚ú®</span> <!-- Changed from 'E' to sparkle emoji -->
      </div>
      <span>Elegant</span>
    </label>
  </div>
</div>

<!-- Create/Edit Form Preview -->
<div id="birthday-card-preview" class="petCard hidden" style="margin: 15px 0; padding: 15px; border-radius: 8px;">
  <div class="petCard-header">
    <h3 style="margin: 0">Live Theme Preview</h3>
  </div>
</div>

		 <div class="button-container">  <!-- üëà Add this wrapper -->
	     <button type="submit" class="button">Save Profile</button>
			 <!-- Cancel button injected here by JS -->
		 </div>
      </form>
    </div>    <!-- CLOSES PROFILE SECTION -->
  </div>    <!-- CLOSES DASHBOARD -->

	
  <!-- QR Modal -->
  <div id="qr-modal">
    <div class="printable-area">
      <div id="qrcode-container"></div>
      <div id="qr-controls" style="margin-top:20px;">
        <button class="qr-print" data-action="print">Print</button>
        <button class="qr-download" data-action="download">Download</button>
        <button class="qr-share" data-action="share" style="background:#9b59b6; color:white;">Share</button>
        <button class="qr-close" data-action="close" style="background:#e74c3c; color:white;">Close</button>
      </div>
      <p id="qr-status" style="font-size:12px; color:#666; margin-top:10px;"></p>
    </div>
  </div>
	
  <footer>
    <p>&copy; 2025 PetStudio. All rights reserved.</p>
  </footer>
  <!-- Scripts (Optimized Order) -->
  <script src="./js/auth.js" defer></script>
  <script src="./js/utils.js" defer></script>
  <script src="./js/dashboard.js" defer></script>
</body>
</html>
